# 에이전트 공용 행동 강령 (AGENT_INSTRUCTION.md)

이 문서는 'Biz-Retriever' 프로젝트에 참여하는 모든 AI 에이전트가 준수해야 할 행동 강령입니다.

> **※ 본 프로젝트의 최상위 의사결정 기준은 `AI_MASTER_INSTRUCTION.md`를 따른다.**

## 1. 최우선 원칙 (The Golden Rule)
> **"작업을 시작하기 전과 끝낸 후, 반드시 `docs/PROJECT_STATE.md`를 읽고 갱신하라."**

*   **세션 시작 시**: `PROJECT_STATE.md`의 '현재 구현 현황'과 '다음 작업'을 읽어 맥락을 파악한다.
*   **작업 완료 시**: 본인이 수행한 작업 내용, 해결한 버그, 남은 이슈를 `PROJECT_STATE.md`의 '에이전트 작업 로그' 섹션에 상세히 기록한다.

## 2. 기술적 제약 사항 (Technical Constraints)
본 프로젝트는 **Raspberry Pi 4 (4GB RAM)** 환경에서의 구동을 목표로 합니다.

1.  **리소스 최적화**:
    *   무거운 라이브러리 추가 시 신중해야 함 (예: 대형 LLM 로컬 구동 지양).
    *   Docker 이미지 빌드 시 `slim` 또는 `alpine` 기반 이미지 선호.
    *   로그는 파일로 남기되, 주기적으로 로테이션되거나 정리되어야 함.

2.  **경로 및 환경**:
    *   윈도우 로컬 개발 환경(`C:\sideproject`) 기준의 상대 경로를 사용한다.
    *   절대 경로 사용 금지 (e.g., `/home/user/...` X, `./app/...` O).
    *   Celery와 같은 비동기 작업 시 **DB 연결은 동기식(`psycopg2`)을 사용**하여 이벤트 루프 충돌을 방지한다.

3.  **문서화**:
    *   모든 중요 변경 사항은 `SPEC.md`와 `PROGRESS.md`에 반영한다.
    *   코드를 수정할 때는 주석을 과하게 달지 말고, 함수/클래스의 Docstring을 충실히 작성한다.

## 3. 협업 프로토콜 (Collaboration Protocol)
*   **에이전트 교체**: 토큰 제한 등으로 세션이 종료될 때, 다음 에이전트가 즉시 작업을 이어받을 수 있도록 '다음 작업(Next Action)'을 명확히 지정한다.
*   **에러 대응**: 에러 발생 시, 단순히 로그만 보는 것이 아니라 `docker logs`와 소스 코드를 교차 검증하여 원인을 찾는다.
*   **사용자 소통**: 기술적 용어보다는 기능 중심의 직관적인 언어로 진행 상황을 보고한다.

---
**"계속해"** 라는 명령어를 받으면, 위 지침에 따라 `PROJECT_STATE.md`의 '다음 작업'을 즉시 수행하십시오.
