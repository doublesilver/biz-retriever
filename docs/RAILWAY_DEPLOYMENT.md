# Railway Deployment Guide

## Prerequisites
- Railway account (https://railway.app)
- GitHub repository connected
- Environment variables ready

## Quick Deploy

### 1. Install Railway CLI
```bash
npm install -g @railway/cli
```

### 2. Login
```bash
railway login
```

### 3. Initialize Project
```bash
railway init
```

### 4. Add PostgreSQL
```bash
railway add --plugin postgresql
```

### 5. Add Redis
```bash
railway add --plugin redis
```

### 6. Set Environment Variables
```bash
railway variables set SECRET_KEY="your-secret-key"
railway variables set G2B_API_KEY="your-g2b-key"
railway variables set GEMINI_API_KEY="your-gemini-key"
railway variables set SLACK_WEBHOOK_URL="your-slack-webhook"
```

### 7. Deploy
```bash
railway up
```

## Environment Variables (Railway Dashboard)

Set these in Railway dashboard under Variables:

```
DATABASE_URL (auto-generated by PostgreSQL plugin)
REDIS_URL (auto-generated by Redis plugin)
SECRET_KEY=<generate with: python -c "import secrets; print(secrets.token_urlsafe(32))">
G2B_API_KEY=<your-g2b-api-key>
GEMINI_API_KEY=<your-gemini-api-key>
SLACK_WEBHOOK_URL=<your-slack-webhook>
SLACK_CHANNEL=#입찰-알림
ACCESS_TOKEN_EXPIRE_MINUTES=11520
```

## Post-Deployment

### Run Migrations
```bash
railway run alembic upgrade head
```

### Check Logs
```bash
railway logs
```

### Open Application
```bash
railway open
```

## Troubleshooting

### Database Connection Issues
- Ensure PostgreSQL plugin is added
- Check DATABASE_URL is set correctly
- Verify migrations ran successfully

### Build Failures
- Check `railway.json` configuration
- Verify `requirements.txt` is up to date
- Review build logs: `railway logs --build`

## Scaling

### Horizontal Scaling
Railway Pro plan supports multiple replicas:
```bash
railway scale --replicas 3
```

### Vertical Scaling
Upgrade resources in Railway dashboard under Settings > Resources

## Monitoring

- **Metrics**: Railway dashboard > Metrics tab
- **Logs**: `railway logs --tail`
- **Health Check**: Add `/health` endpoint monitoring

## Cost Optimization

- Use Railway's free tier for development
- Upgrade to Pro ($20/month) for production
- Monitor usage in dashboard

## Additional Resources

- [Railway Docs](https://docs.railway.app)
- [Railway Discord](https://discord.gg/railway)
- [Pricing](https://railway.app/pricing)
