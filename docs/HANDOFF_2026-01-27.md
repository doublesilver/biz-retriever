# 작업 인수인계 문서 (Handoff Document)

> **작성일**: 2026-01-27
> **작성자**: AI Tech Lead (Claude Opus 4.5)
> **프로젝트**: Biz-Pass (구 Biz-Retriever)

---

## 1. 완료된 작업 요약

### 1.1 프로젝트 정리 (Cleanup)

| 작업 | 상태 | 비고 |
|------|------|------|
| 레거시 파일 아카이브 | ✅ 완료 | 7개 → `archive/legacy_docs/` |
| 중복 디렉토리 제거 | ✅ 완료 | `app/static/` 삭제 |
| 임시 파일 정리 | ✅ 완료 | `temp_audit*.html` 삭제 |
| deprecated API 수정 | ✅ 완료 | profile_service.py |
| 테스트 수정 | ✅ 완료 | 4개 파일 |

### 1.2 테스트 현황

```
pytest tests/ -v
========================= 165 passed in 53.45s =========================
```

**모든 테스트 통과 (100%)**

---

## 2. 수정된 주요 파일

### 2.1 코드 수정

| 파일 | 변경 내용 |
|------|----------|
| [app/services/profile_service.py](../app/services/profile_service.py) | `google.generativeai` → `google.genai` SDK 변경 |
| [app/main.py](../app/main.py) | StaticFiles 마운트 제거, root endpoint JSON 응답 |

### 2.2 테스트 수정

| 파일 | 변경 내용 |
|------|----------|
| [tests/unit/test_file_service.py](../tests/unit/test_file_service.py) | HWP assertion에 olefile 키워드 추가 |
| [tests/unit/test_rag_service.py](../tests/unit/test_rag_service.py) | `service.llm` → `service.client` |
| [tests/integration/test_crawler_api.py](../tests/integration/test_crawler_api.py) | patch 경로: `app.worker.tasks.crawl_g2b_bids` |
| [tests/e2e/test_full_workflow.py](../tests/e2e/test_full_workflow.py) | patch 경로: `app.worker.tasks.crawl_g2b_bids` |

### 2.3 생성된 문서

| 파일 | 설명 |
|------|------|
| [docs/AUDIT_REPORT.md](AUDIT_REPORT.md) | 기술 감사 보고서 |
| [docs/PROJECT_STATE.md](PROJECT_STATE.md) | 프로젝트 상태 (업데이트됨) |

---

## 3. 현재 프로젝트 상태

### 3.1 로드맵 진행 현황

```
Phase 0: 준비           ████████████ 100% ✅
Phase 1: 데이터 파이프라인  ████████████ 100% ✅
Phase 2: 프로필 자동화    ████████████ 100% ✅
Phase 3: 매칭 엔진       ████████████ 100% ✅ (Hard/Soft Match 완비)
Phase 4: 배포 및 최적화   ████████████ 100% ✅ (RPi 배포 완료)
Phase 5: QA & 법적검증   ░░░░░░░░░░░░   0% 🔜 ← 다음 작업
Phase 6: 출시 준비       ░░░░░░░░░░░░   0%
```

### 3.2 기술 스택

- **Backend**: FastAPI + Celery + PostgreSQL + Redis
- **AI Engine**: Google Gemini 2.5 Flash (`google-genai` SDK)
- **Frontend**: Nginx 정적 서빙 (frontend/)
- **Target**: Raspberry Pi 4 (4GB RAM) - **Production Live** (100.75.72.6)

---

## 4. 다음 작업 (Phase 5)

### 4.1 Immediate Tasks (QA & Monitoring)

1. **배포 안정성 모니터링**
   - 12시간 이상 가동 로그 확인
   - 메모리 누수 점검

2. **기능 통합 테스트 (Manual QA)**
   - 실제 공고 데이터 수집 및 매칭 정확도 검증
   - 사용자 플로우 (회원가입 -> 프로필 설정 -> 매칭 확인) 점검

3. **법적/UX 검증**
   - "보장" 단어 사용 여부 전수 조사
   - 공고 없음(Empty State) 디자인 적용 여부 확인

### 4.2 권장 작업 순서

```
1. 모니터링 스크립트 실행 (scripts/monitor.sh)
2. 시나리오 기반 Manual QA 진행
3. 버그 수정 (Hotfix)
4. 최종 운영 가이드 작성
```

---

## 5. 주의사항

### 5.1 보안 (즉시 적용 권장)

```yaml
# docker-compose.yml 수정 필요
# 하드코딩된 비밀번호 → 환경변수로 변경
POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
```

### 5.2 테스트 실행 방법

```bash
# 전체 테스트
pytest tests/ -v

# 특정 테스트만
pytest tests/unit/test_matching_service.py -v

# 커버리지 포함
pytest --cov=app --cov-report=html tests/
```

### 5.3 Celery Task Mock 패턴

테스트에서 Celery task를 mock할 때 **import 위치가 아닌 정의 위치**에서 patch:

```python
# ✅ 올바름
with patch('app.worker.tasks.crawl_g2b_bids') as mock_task:

# ❌ 틀림 (lazy import로 인해 작동 안 함)
with patch('app.api.endpoints.crawler.crawl_g2b_bids') as mock_task:
```

---

## 6. 참고 문서

| 문서 | 경로 | 설명 |
|------|------|------|
| 프로젝트 상태 | [docs/PROJECT_STATE.md](PROJECT_STATE.md) | 로드맵, 환경, 변경이력 |
| 감사 보고서 | [docs/AUDIT_REPORT.md](AUDIT_REPORT.md) | 기술 감사 결과 |
| 작업 진행 | [docs/WORK_IN_PROGRESS.md](WORK_IN_PROGRESS.md) | 상세 작업 기록 |
| 에이전트 지침 | [docs/AGENT_INSTRUCTION.md](AGENT_INSTRUCTION.md) | AI 에이전트 가이드 |

---

## 7. 빠른 시작 (Quick Start)

```bash
# 1. 테스트 실행 (현재 상태 확인)
pytest tests/ -v

# 2. 로컬 서버 실행
uvicorn app.main:app --reload --port 8000

# 3. Docker 실행 (RPi 배포용)
docker-compose up -d

# 4. API 문서 확인
# http://localhost:8000/docs
```

---

**인수인계 완료**: 2026-01-27
**다음 작업**: Phase 3 - Hard Match 규칙 엔진 구현
