# AI_MASTER_INSTRUCTION.md - Biz-Retriever 최상위 헌법

> **문서 상태**: 절대 삭제/덮어쓰기 금지
> **수정 권한**: 사용자 명시 승인 시에만 허용
> **최종 수정**: 2026-01-27

---

## 1. 제품 방향 (Product Direction)

### 1.1 핵심 가치
Biz-Retriever는 **공공 입찰 정보를 자동 수집하고 AI로 분석하여 중소기업의 입찰 기회를 극대화**하는 솔루션이다.

### 1.2 타겟 사용자
- 공공 입찰에 참여하는 중소기업
- IT 기술 자원이 부족한 1인 기업 및 소규모 팀

### 1.3 핵심 기능
1. **G2B 공공입찰 크롤링**: 나라장터 API 연동
2. **온비드 크롤링**: 온비드 임대차 공고 수집
3. **AI 분석**: 키워드 필터링, 중요도 점수화, 투찰가 예측
4. **알림 시스템**: Slack/Email 통한 실시간 알림
5. **대시보드**: 공고 관리, 칸반 보드, 통계 시각화

---

## 2. 의사결정 원칙 (Decision Principles)

### 2.1 기획-구현-변경 원칙
```
"기획은 제안, 구현은 존중, 변경은 기록"
```

| 상황 | 원칙 |
|------|------|
| 새로운 기능 제안 | AI가 제안할 수 있으나, 사용자 승인 필요 |
| 기존 구현 수정 | 기존 동작을 깨지 않는 범위에서만 허용 |
| 구조적 변경 | 반드시 사용자 승인 후 수행, 변경 전후 기록 필수 |

### 2.2 우선순위 매트릭스
1. **버그 수정** > 기능 개선 > 새 기능 추가
2. **안정성** > 성능 > 확장성
3. **사용자 가치** > 기술적 우아함

### 2.3 금지 사항 (Do Not)
- PROJECT_STATE.md에 기록된 사실을 추론으로 변경 금지
- "더 나은 설계"를 이유로 한 전면 재작성 금지
- 상태 기록 없이 다음 작업으로 이동 금지
- 기존 문서 임의 삭제 금지

---

## 3. 법적/신뢰 리스크 기준 (Risk Standards)

### 3.1 법적 안전성
- 공공데이터포털 API 이용약관 준수
- 크롤링 대상 사이트의 robots.txt 존중
- 개인정보 수집/저장 금지 (공고 내 개인정보 마스킹)

### 3.2 데이터 신뢰성
- API 키, 비밀번호 등 민감 정보는 `.env`로 관리
- 민감 정보가 포함된 파일은 절대 Git에 커밋하지 않음
- 로그에 민감 정보 출력 금지

### 3.3 시스템 안정성
- 프로덕션 환경에서 `--reload` 플래그 사용 금지
- DB 마이그레이션은 백업 후 수행
- 외부 API 호출 시 Rate Limiting 준수

---

## 4. 기술적 제약 (Technical Constraints)

### 4.1 하드웨어 제약
- **Target**: Raspberry Pi 4 (4GB RAM)
- 무거운 라이브러리 지양 (대형 LLM 로컬 구동 금지)
- Docker 이미지는 `slim`/`alpine` 기반 선호

### 4.2 개발 환경
- 로컬: Windows (`C:\sideproject`)
- 운영: Raspberry Pi + Docker Compose
- Python: 3.11 (3.14 alpha는 호환성 문제)

### 4.3 아키텍처 원칙
- Celery Worker: 동기식 DB 접근 (`psycopg2`)
- 비동기 코드: FastAPI 라우터에서만 사용
- 상대 경로 사용 (절대 경로 금지)

---

## 5. 문서 계층 구조 (Document Hierarchy)

```
AI_MASTER_INSTRUCTION.md  ← 최상위 헌법 (이 문서)
       │
       ├── AGENT_INSTRUCTION.md  ← 행동 규약
       │
       ├── PROJECT_STATE.md  ← 단일 진실원 (상태)
       │
       └── WORK_IN_PROGRESS.md  ← 작업 관리 보조
```

### 우선순위
1. `PROJECT_STATE.md`에 기록된 사실이 최우선
2. `AI_MASTER_INSTRUCTION.md`는 방향 제시 (기존 구현 파괴 권한 없음)
3. 구조적 변경은 반드시 사용자 승인 요청 후 수행

---

## 6. 판단 기준 체크리스트

모든 판단은 아래 3가지를 통과해야 한다:

- [ ] **법적 안전성**: 법률/약관 위반 없는가?
- [ ] **유지 가능성**: 향후 유지보수가 용이한가?
- [ ] **실제 사용자 가치**: 최종 사용자에게 가치를 제공하는가?

---

## 7. 버전 이력

| 버전 | 날짜 | 변경 내용 | 승인자 |
|------|------|----------|--------|
| 1.0 | 2026-01-27 | 초기 문서 생성 | 사용자 |

---

**Note**: 이 문서는 Biz-Retriever 프로젝트의 최상위 의사결정 기준입니다.
모든 AI 에이전트는 이 문서의 원칙을 준수해야 합니다.
