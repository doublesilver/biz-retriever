<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í”„ë¡œí•„ ê´€ë¦¬ - Biz-Retriever</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <style>
        .profile-grid {
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 2rem;
            margin-top: 1rem;
        }

        .upload-card {
            background: var(--bg-secondary);
            padding: 2rem;
            border-radius: var(--radius-lg);
            border: 2px dashed var(--border-color);
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .upload-card:hover {
            border-color: var(--primary-color);
            background: var(--bg-hover);
        }

        .form-info {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .license-tag {
            display: inline-block;
            background: var(--primary-light);
            color: var(--primary-color);
            padding: 0.2rem 0.6rem;
            border-radius: var(--radius-sm);
            margin: 0.2rem;
            font-size: 0.85rem;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .profile-grid {
                grid-template-columns: 1fr !important;
                gap: 1.5rem !important;
            }

            .upload-card {
                padding: 1.5rem;
            }

            .section-header h1 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="navbar-brand">
            <a href="dashboard.html" style="text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                <span>ğŸ•</span>
                <span>Biz-Retriever</span>
            </a>
        </div>
        <div class="navbar-actions">
            <a href="dashboard.html" class="btn-icon" title="ëŒ€ì‹œë³´ë“œ">ğŸ </a>
            <a href="kanban.html" class="btn-icon" title="ì¹¸ë°˜ ë³´ë“œ">ğŸ“‹</a>
            <button class="btn-icon" id="darkModeToggle" title="ë‹¤í¬ëª¨ë“œ">ğŸŒ™</button>
            <div class="user-menu">
                <button class="btn-icon" id="userMenuBtn">ğŸ‘¤</button>
                <div class="dropdown-menu" id="userDropdown">
                    <button id="logoutBtn">ë¡œê·¸ì•„ì›ƒ</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="dashboard-container">
        <div class="container">
            <div class="section-header">
                <h1>ğŸ¢ ê¸°ì—… í”„ë¡œí•„ ê´€ë¦¬</h1>
                <p>ì‚¬ì—…ì ì •ë³´ë¥¼ ë“±ë¡í•˜ê³  ì •ë°€ ë§¤ì¹­ì„ ìœ„í•œ ê¸°ì´ˆ ë°ì´í„°ë¥¼ ì™„ì„±í•˜ì„¸ìš”.</p>
            </div>

            <div class="profile-grid">
                <!-- Left: Upload Section -->
                <div class="card">
                    <h3>ğŸ“· ì‚¬ì—…ìë“±ë¡ì¦ ìë™ ì¶”ì¶œ</h3>
                    <p class="form-info">Gemini AIê°€ ì‚¬ì—…ì ì •ë³´ë¥¼ ìë™ìœ¼ë¡œ ë¶„ì„í•©ë‹ˆë‹¤.</p>
                    <div class="upload-card" id="dropZone">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ“„</div>
                        <p>ì‚¬ì—…ìë“±ë¡ì¦ ì´ë¯¸ì§€ ë˜ëŠ” PDFë¥¼ ì—…ë¡œë“œí•˜ì„¸ìš”</p>
                        <input type="file" id="certFile" hidden accept="image/*,.pdf">
                    </div>
                    <div id="uploadStatus" style="margin-top: 1rem; display: none;">
                        <div class="spinner-sm"></div> <span id="statusText">ë¶„ì„ ì¤‘...</span>
                    </div>
                </div>

                <!-- Right: Profile Form -->
                <div class="card">
                    <h3>ğŸ” í†µí•© ê¸°ì—… ì •ë³´</h3>

                    <!-- Phase 3: Subscription Plan -->
                    <div
                        style="margin-bottom: 2rem; padding: 1rem; background: var(--bg-secondary); border-radius: 8px;">
                        <h4
                            style="margin-bottom: 0.5rem; font-size: 0.95rem; display: flex; align-items: center; gap: 0.5rem;">
                            ğŸ’³ ì´ìš© í”Œëœ
                            <span id="currentPlanBadge" class="badge"
                                style="background: var(--text-disabled);">Loading...</span>
                        </h4>
                        <div style="display: flex; gap: 0.5rem;">
                            <select id="planSelect" class="form-control" style="flex-grow: 1;">
                                <option value="free">Free (ë¬´ë£Œ - ë§ì¶¤ê³µê³  3ê±´/ì¼)</option>
                                <option value="basic">Basic (10,000ì› - ë§ì¶¤ê³µê³  50ê±´/ì¼)</option>
                                <option value="pro">Pro (30,000ì› - ë¬´ì œí•œ)</option>
                            </select>
                            <button id="updatePlanBtn" class="btn btn-primary" style="white-space: nowrap;">í”Œëœ
                                ë³€ê²½</button>
                        </div>
                    </div>

                    <form id="profileForm">
                        <div class="form-group">
                            <label>ìƒí˜¸(ë²•ì¸ëª…)</label>
                            <input type="text" id="companyName" class="form-control" placeholder="ì¶”ì¶œ ëŒ€ê¸° ì¤‘...">
                        </div>
                        <div class="form-group">
                            <label>ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸</label>
                            <input type="text" id="brn" class="form-control" placeholder="ì¶”ì¶œ ëŒ€ê¸° ì¤‘...">
                        </div>
                        <div class="form-group">
                            <label>ëŒ€í‘œìëª…</label>
                            <input type="text" id="representative" class="form-control" placeholder="ì¶”ì¶œ ëŒ€ê¸° ì¤‘...">
                        </div>
                        <div class="form-group">
                            <label>ì‚¬ì—…ì¥ ì£¼ì†Œ</label>
                            <input type="text" id="address" class="form-control" placeholder="ì¶”ì¶œ ëŒ€ê¸° ì¤‘...">
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div class="form-group">
                                <label>ì§€ì—­ ì½”ë“œ (ì¶”ì¶œë¨)</label>
                                <input type="text" id="locationCode" class="form-control" readonly>
                            </div>
                            <div class="form-group">
                                <label>ê¸°ì—… êµ¬ë¶„</label>
                                <input type="text" id="companyType" class="form-control">
                            </div>
                        </div>

                        <!-- Phase 6.1: ìƒì„¸ ì •ë³´ -->
                        <div style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
                            <h4 style="margin-bottom: 1rem; font-size: 0.95rem; color: var(--text-secondary);">ğŸ“Œ ìƒì„¸ ê²½ì˜
                                ì •ë³´</h4>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                <div class="form-group">
                                    <label>ì‹ ìš©ë“±ê¸‰</label>
                                    <select id="creditRating" class="form-control">
                                        <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                                        <option value="AAA">AAA</option>
                                        <option value="AA">AA</option>
                                        <option value="A">A</option>
                                        <option value="BBB">BBB</option>
                                        <option value="BB">BB</option>
                                        <option value="B">B</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>ì£¼ê±°ë˜ ì€í–‰</label>
                                    <input type="text" id="mainBank" class="form-control" placeholder="ì˜ˆ: ìš°ë¦¬ì€í–‰">
                                </div>
                                <div class="form-group">
                                    <label>ì§ì› ìˆ˜ (ëª…)</label>
                                    <input type="number" id="employeeCount" class="form-control" placeholder="25">
                                </div>
                                <div class="form-group">
                                    <label>ì„¤ë¦½ì—°ë„</label>
                                    <input type="number" id="foundingYear" class="form-control" placeholder="2010">
                                </div>
                            </div>
                            <div class="form-group" style="margin-top: 1rem;">
                                <label>í‘œì¤€ì‚°ì—…ë¶„ë¥˜ì½”ë“œ (ì‰¼í‘œ êµ¬ë¶„)</label>
                                <input type="text" id="industryCodes" class="form-control"
                                    placeholder="ì˜ˆ: 42121, 42122">
                            </div>
                        </div>

                        <!-- Phase 8: Notification Settings -->
                        <div style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
                            <h4 style="margin-bottom: 1rem; font-size: 0.95rem; color: var(--text-secondary);">ğŸ”” ì•Œë¦¼ ì„¤ì •
                            </h4>

                            <div class="form-group">
                                <label>Slack Webhook URL</label>
                                <input type="text" id="slackWebhookUrl" class="form-control"
                                    placeholder="https://hooks.slack.com/services/...">
                                <p class="form-info">ê´€ì‹¬ í‚¤ì›Œë“œ ë§¤ì¹­ ì‹œ ì•Œë¦¼ì„ ë°›ì„ Slack ì±„ë„ì˜ Webhook URLì„ ì…ë ¥í•˜ì„¸ìš”.</p>
                            </div>

                            <div style="display: flex; gap: 2rem; margin-top: 1rem;">
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" id="slackNotificationsEnabled">
                                    <span>Slack ì•Œë¦¼ ì¼œê¸°</span>
                                </label>

                                <label
                                    style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" id="enableEmail">
                                    <span>ì´ë©”ì¼ ì•Œë¦¼ ì¼œê¸°</span>
                                </label>
                            </div>
                        </div>

                        <!-- Phase 9: License Management -->
                        <div style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
                            <h4 style="margin-bottom: 1rem; font-size: 0.95rem; color: var(--text-secondary); display: flex; align-items: center; justify-content: space-between;">
                                ğŸ“œ ë³´ìœ  ë©´í—ˆ
                                <button type="button" class="btn btn-sm btn-primary" id="addLicenseBtn">+ ë©´í—ˆ ì¶”ê°€</button>
                            </h4>
                            <div id="licenseList" style="display: grid; gap: 0.5rem;">
                                <p style="color: var(--text-muted); font-size: 0.9rem;">ë“±ë¡ëœ ë©´í—ˆê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                            </div>
                        </div>

                        <!-- Phase 9: Performance Management -->
                        <div style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
                            <h4 style="margin-bottom: 1rem; font-size: 0.95rem; color: var(--text-secondary); display: flex; align-items: center; justify-content: space-between;">
                                ğŸ—ï¸ ì‹œê³µ/ìš©ì—­ ì‹¤ì 
                                <button type="button" class="btn btn-sm btn-primary" id="addPerformanceBtn">+ ì‹¤ì  ì¶”ê°€</button>
                            </h4>
                            <div id="performanceList" style="display: grid; gap: 0.5rem;">
                                <p style="color: var(--text-muted); font-size: 0.9rem;">ë“±ë¡ëœ ì‹¤ì ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                            </div>
                        </div>

                        <div class="form-actions" style="margin-top: 2rem;">
                            <button type="submit" class="btn btn-primary btn-block">ğŸ’¾ í”„ë¡œí•„ ì €ì¥</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <!-- Add License Modal -->
    <div id="licenseModal" class="modal">
        <div class="modal-backdrop" onclick="closeLicenseModal()"></div>
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3>ğŸ“œ ë©´í—ˆ ì¶”ê°€</h3>
                <button class="btn-icon modal-close" onclick="closeLicenseModal()">âœ–ï¸</button>
            </div>
            <div class="modal-body">
                <form id="licenseForm">
                    <div class="form-group">
                        <label>ë©´í—ˆëª… *</label>
                        <input type="text" id="licenseName" class="form-control" placeholder="ì˜ˆ: ê±´ì„¤ì—… ë©´í—ˆ" required>
                    </div>
                    <div class="form-group">
                        <label>ë©´í—ˆë²ˆí˜¸</label>
                        <input type="text" id="licenseNumber" class="form-control" placeholder="ì˜ˆ: ì œ2024-12345í˜¸">
                    </div>
                    <div class="form-group">
                        <label>ì·¨ë“ì¼</label>
                        <input type="date" id="licenseIssueDate" class="form-control">
                    </div>
                </form>
            </div>
            <div class="modal-footer" style="padding: 1.5rem; text-align: right; border-top: 1px solid var(--border-color); display: flex; gap: 0.5rem; justify-content: flex-end;">
                <button class="btn btn-secondary" onclick="closeLicenseModal()">ì·¨ì†Œ</button>
                <button class="btn btn-primary" id="saveLicenseBtn">ì €ì¥</button>
            </div>
        </div>
    </div>

    <!-- Add Performance Modal -->
    <div id="performanceModal" class="modal">
        <div class="modal-backdrop" onclick="closePerformanceModal()"></div>
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3>ğŸ—ï¸ ì‹¤ì  ì¶”ê°€</h3>
                <button class="btn-icon modal-close" onclick="closePerformanceModal()">âœ–ï¸</button>
            </div>
            <div class="modal-body">
                <form id="performanceForm">
                    <div class="form-group">
                        <label>í”„ë¡œì íŠ¸ëª… *</label>
                        <input type="text" id="projectName" class="form-control" placeholder="ì˜ˆ: OOê±´ë¬¼ ì‹ ì¶•ê³µì‚¬" required>
                    </div>
                    <div class="form-group">
                        <label>ê³„ì•½ê¸ˆì•¡ (ì›) *</label>
                        <input type="number" id="projectAmount" class="form-control" placeholder="1000000000" required>
                    </div>
                    <div class="form-group">
                        <label>ì¤€ê³µì¼</label>
                        <input type="date" id="completionDate" class="form-control">
                    </div>
                </form>
            </div>
            <div class="modal-footer" style="padding: 1.5rem; text-align: right; border-top: 1px solid var(--border-color); display: flex; gap: 0.5rem; justify-content: flex-end;">
                <button class="btn btn-secondary" onclick="closePerformanceModal()">ì·¨ì†Œ</button>
                <button class="btn btn-primary" id="savePerformanceBtn">ì €ì¥</button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast"></div>

    <script src="/js/utils.js?v=v2"></script>
    <script src="/js/api.js?v=v2"></script>
    <script src="/js/profile.js?v=v2"></script>
</body>

</html>